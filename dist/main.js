(()=>{"use strict";async function n(n,e={},t=3e4){return await new Promise((async o=>{let r=new URLSearchParams(e).toString();r.length>0&&(r="?"+r),setTimeout((()=>{o(503)}),t);try{const e=await fetch(`https://ddu6.xyz/services/ph-get/${n}${r}`);if(200!==e.status)return void o(500);const{status:t,data:a}=await e.json();if(200===t)return void o({data:a});if("number"==typeof t)return void o(t)}catch(n){console.log(n)}o(500)}))}function e(n){const e=document.createElement("canvas");e.width=1e3,e.height=1e3,e.classList.add("idsDensityView");const t=e.getContext("2d");if(null===t)throw new Error;t.scale(10,10),t.fillStyle="rgb(30,30,30)",n=n.map((n=>n%1e4));for(let e=0;e<n.length;e++){const o=n[e]-1,r=o%100,a=(o-r)/100;t.fillRect(r,a,1,1)}t.fillStyle="grey";for(let n=0;n<10;n++){const e=10*n+9.9,o=10*n+9.9;t.fillRect(0,e,100,.1),t.fillRect(o,0,.1,100)}return e}document.head.innerHTML="<meta charset='utf8'>\n<meta name='viewport' content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0'>\n<title>PKU Hole Analyzer</title>\n<link rel=\"icon\" href=\"https://cdn.jsdelivr.net/gh/ddu6/static@0.1.0/imgs/ph.png\" type=\"image/png\">",document.body.style.margin="0";const t=new class{constructor(){this.element=document.createElement("div"),this.style=document.createElement("style"),this.cmdInput=document.createElement("input"),this.console=document.createElement("div");const{element:n,style:e,cmdInput:t,console:o}=this;e.textContent='body {\n    --color-text: #cccccc;\n    --color-light: #8f8f8f;\n    --color-string: #df9e61;\n    --color-number: #B5CEA8;\n    --color-keyword: #cc80c6;\n    --color-function: #DCDCAA;\n    --color-variable: #6ec0ec;\n    --color-modifier: #3074ac;\n    --color-class: #4EC9B0;\n    --color-warn: #F44747;\n    --color-comment: #6A9955;\n    --color-border: #2e3133;\n    --color-bg: #131313;\n    --color-area: #161616;\n    --color-pre: #191b1d;\n    --color-slice: rgba(88, 88, 88, 0.5);\n    --color-selection: rgba(95, 144, 163, 0.5);\n    --color-span: rgba(58, 61, 65, 0.5);\n    --font: icomoon, "Segoe UI", "Microsoft YaHei", "Hiragino Sans GB", "STHeiti Light", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    --length-width-side: 280px;\n    --length-width-bar: 15px;\n    --length-padding: 2em;\n    --length-padding-pre: 1em;\n    --length-padding-cell: .5em;\n    --length-padding-span: .3em;\n    --length-padding-circle: .2em;\n    --length-margin-title: 1em;\n    --length-margin-heading: .5em;\n    --length-margin-display: .25em;\n    --length-radius-pre: .5em;\n    --length-radius-span: .3em;\n    --length-font-title: 1.8em;\n    --length-font-heading: 1.3em;\n    --length-font-span: .85em;\n    --length-font-log: .8em;\n    --length-font-circle: .7em;\n    --length-space: .25em;\n    --length-space-gap: .5em;\n    --length-space-tab: 2em;\n    --number-ratio-line: 1.5;\n    line-height: var(--number-ratio-line);\n    font-family: var(--font);\n    color: var(--color-text);\n    background-color: var(--color-bg) !important;\n    font-size: 16px;\n}\n\n@media screen and (max-width:650px) {\n    body {\n        font-size: 15.5px\n    }\n}\n\n@media screen and (max-width:600px) {\n    body {\n        font-size: 15px\n    }\n}\n\n@media screen and (max-width:550px) {\n    body {\n        font-size: 14.5px\n    }\n}\n\n@media screen and (max-width:500px) {\n    body {\n        font-size: 14px\n    }\n}\n\n@media screen and (max-width:450px) {\n    body {\n        font-size: 13.5px\n    }\n}\n\n@media screen and (max-width:400px) {\n    body {\n        font-size: 13px\n    }\n}\n\n::-webkit-scrollbar {\n    background-color: transparent;\n}\n\n::-webkit-scrollbar-corner {\n    background-color: transparent;\n}\n\n::-webkit-scrollbar-thumb {\n    background-color: var(--color-slice);\n}\n\na {\n    color: inherit;\n    text-decoration: none;\n}\n\na[href] {\n    color: var(--color-modifier);\n}\n\na[href]:hover {\n    text-decoration: underline;\n}\n\nbutton,\ninput[type="button"],\ninput[type="reset"],\ninput[type="submit"],\n.button {\n    font: inherit;\n    color: var(--color-text);\n    border-radius: var(--length-radius-span);\n    padding: var(--length-padding-circle) var(--length-padding-pre);\n    background-color: var(--color-slice);\n    border: none;\n    outline: none;\n}\n\nbutton:hover,\ninput[type="button"]:hover,\ninput[type="reset"]:hover,\ninput[type="submit"]:hover,\n.button:hover {\n    background-color: var(--color-selection);\n}\n\nimg {\n    max-width: 100%;\n    max-height: 280vh;\n    filter: grayscale(50%) brightness(50%);\n    display: block;\n}\n\ninput,\nselect,\ntextarea,\n.input,\n.select,\n.textarea {\n    font: inherit;\n    color: var(--color-text);\n    padding: 0 var(--length-padding-circle);\n    margin: 0;\n    background-color: transparent;\n    border: 1px solid var(--color-border);\n    outline: none;\n    border-radius: var(--length-radius-span);\n}\n\ninput:focus,\nselect:focus,\ntextarea:focus,\n.input:focus,\n.select:focus,\n.textarea:focus {\n    border-color: var(--color-variable);\n}\n\nselect,\n.select {\n    padding: 0;\n}\n\ntextarea {\n    resize: none;\n}\n\n.console>.item{\n    margin-bottom: var(--length-margin-heading);\n}\n\n.idsDensityView{\n    display: block;\n    width: 500px;\n    max-width: 100%;\n}',t.addEventListener("keydown",(async n=>{"Enter"===n.key&&await this.exec()})),t.classList.add("cmd"),o.classList.add("console"),n.append(e),n.append(t),n.append(o)}async init(){}async exec(){const{cmdInput:t,console:o}=this,r=t.value.trim();t.value="";const a=document.createElement("div"),i=document.createElement("div");i.textContent=`${function(){const n=new Date;return[n.getMonth()+1,n.getDate()].map((n=>n.toString().padStart(2,"0"))).join("-")+" "+[n.getHours(),n.getMinutes(),n.getSeconds()].map((n=>n.toString().padStart(2,"0"))).join(":")+":"+n.getMilliseconds().toString().padStart(3,"0")}()}  ${r}`;const c=document.createElement("div");c.textContent="executing",i.classList.add("desc"),c.classList.add("content"),a.classList.add("item"),a.append(i),a.append(c),o.prepend(a);const l=await async function(t){if(t.startsWith("ids")){const o=Number(t.slice(3));if(isNaN(o))return new Error("Invalid cmd.");const r=await async function(e){const t=await n(`local/ids${e}`);return 503===t?503:"number"==typeof t?500:t.data}(o);return"number"==typeof r?new Error(`${r}. Fail to get ids.`):e(r)}if(t.startsWith("cids")){const o=Number(t.slice(4));if(isNaN(o))return new Error("Invalid cmd.");const r=await async function(e){const t=await n(`local/cids${e}`);return 503===t?503:"number"==typeof t?500:t.data}(o);return"number"==typeof r?new Error(`${r}. Fail to get cids.`):e(r)}if("info"===t){const e=await async function(){const e=await n("local/info");return 503===e?503:"number"==typeof e?500:e.data}();if("number"==typeof e)return new Error(`${e}. Fail to get info.`);const{maxId:t,maxCId:o}=e,r=document.createElement("div");return r.textContent=`max-id ${t}, max-cid ${o}`,r}return new Error("Invalid cmd.")}(r);if(l instanceof Error)return c.textContent="Error. "+l.message,void a.classList.add("err");c.textContent="",c.append(l)}};window.main=t,document.body.append(t.element),t.init()})();